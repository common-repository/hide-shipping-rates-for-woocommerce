!function(a){let t=wp.hooks.applyFilters("hide_shipping_rates_has_pro",!1);function i(){var i=(new Date).getTime(),s="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random();return 0<i?(t=(i+t)%16|0,i=Math.floor(i/16)):(t=(s+t)%16|0,s=Math.floor(s/16)),("x"===e?t:3&t|8).toString(16)})}let r=e=>Object.assign({model:"placeholder",data_type:"data_type_placeholder",hold_data:"hold_data_placeholder"},e.data("select2-map"));let s={components:{rule:{template:"#component-hide-shipping-rates-rule",props:{rule:{type:Object},number:{type:Number,default:0}},data(){return Object.assign({id:i(),...hide_shipping_rates_admin.rule_values,...hide_shipping_rates_admin.rule_ui_values},this.rule)},computed:{get_pro_link(){return"https://codiepress.com/plugins/hide-shipping-rates-for-woocommerce-pro/?utm_campaign=hide+shipping+rates+for+woocommerce&utm_source=shipping+methods&utm_medium=field+type&utm_term="+this.type}},beforeMount(){this.$root.rules[this.number]=this.$data},mounted(){wp.hooks.doAction("hide_shipping_rates_rule_mounted",this),this.preload_layout_data()},beforeUpdate(){a(this.$refs.select2_ajax).select2("destroy"),a(this.$refs.select2_dropdown).select2("destroy")},updated(){let t=this;a(this.$refs.select2_ajax).select2({placeholder:a(this).data("placeholder"),dropdownCssClass:"hide-shipping-rates-select2-dropdown",ajax:{url:hide_shipping_rates_admin.ajax_url,dataType:"json",type:"POST",delay:500,data:function(e){var t=r(a(this));return{country:a(this).attr("data-country"),term:e.term,type:t.data_type,security:hide_shipping_rates_admin.nonce_select2_data,action:"hide_shipping_rates/get_select2_data"}},processResults:function(e){return{results:a.map(e.data,e=>({text:e.name,id:e.id}))}}}}).on("change",function(){var e=r(a(this)).model;e.length&&(t[e]=a(this).val())}),a(this.$refs.select2_dropdown).select2({placeholder:a(this).data("placeholder"),dropdownCssClass:"hide-shipping-rates-select2-dropdown"}).on("change",function(){var e=a(this).data("model");e&&e.length&&(t[e]=a(this).val())}),wp.hooks.doAction("hide_shipping_rates_rule_updated",t)},watch:{type(){this.preload_layout_data()},cart_value_type:function(e){"in_cart"!==e&&this.preload_layout_data()},...wp.hooks.applyFilters("hide_shipping_rates_rule_watch",{},this)},methods:{get_countries(){return hide_shipping_rates_admin.countries},get_ui_data_items(e){return Array.isArray(this[e])?this[e]:[]},delete_item(){confirm(hide_shipping_rates_admin.i10n.delete_rule_warning)&&this.$root.rules.splice(this.number,1)},preload_layout_data(){let s=this;this.$nextTick(()=>{let i=r(a(this.$refs.select2_ajax));if(s[i.model]&&s[i.model].length){s.loading=!0;let t=new FormData;s[i.model].forEach(e=>{t.append("ids[]",e)}),t.append("type",i.data_type),t.append("security",hide_shipping_rates_admin.nonce_select2_data),t.append("action","hide_shipping_rates/get_select2_data"),wp.hooks.doAction("hide_shipping_rates_select2_model_form_data",this,t),fetch(hide_shipping_rates_admin.ajax_url,{method:"POST",body:t}).then(e=>e.json()).then(e=>{1==e.success&&(s[i.hold_data]=e.data)}).finally(()=>{s.loading=!1})}}),wp.hooks.doAction("hide_shipping_rates_rule_preload",this)},...wp.hooks.applyFilters("hide_shipping_rates_rule_methods",{})}}},data(){return{rules:[],match_type:"all",hide_shipping_rate:!1,disable_shipping_rules:!1,alternate_matched_result:!1}},computed:{get_rule_data(){var e=JSON.parse(JSON.stringify(this.rules));return e.forEach(t=>{delete t.id,Object.keys(hide_shipping_rates_admin.rule_ui_values).forEach(e=>{delete t[e]})}),JSON.stringify({...this.$data,rules:e})},max_free_rule_item(){return 3}},methods:{show_get_pro_popup(){a("#hide-shipping-rates-modal").trigger("open")},add_new_rule(){if(this.rules.length>=this.max_free_rule_item&&!1===t)return this.show_get_pro_popup();this.rules.push({})},duplicate_rule(e){if(this.rules.length>=this.max_free_rule_item&&!1===t)return this.show_get_pro_popup();e=JSON.parse(JSON.stringify(this.rules[e]));this.rules.push({...e,id:i()})},onOrderChange(e){var t=this.rules.splice(e.oldIndex,1)[0];this.rules.splice(e.newIndex,0,t)},has_pro(){return t}}};function d(){if(a("#hide-shipping-rates-rules-field").length){var e=Vue.createApp(s).use(sortablejs).mount("#hide-shipping-rates-rules-field"),t=a("#hide-shipping-rates-rules-field").data("settings");if("object"==typeof t)for(var i in t)e[i]=t[i]}}d(),a(document.body).on("wc_backbone_modal_loaded",function(e,t){"wc-modal-shipping-method-settings"===t&&d()})}(jQuery);